generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model User {
  id        Int   @id @default(autoincrement())
  email     String   @unique
  password  String
  role      String
}

model Player {
  id        Int    @id @default(autoincrement())
  name      String
  position  String
  number    Int
  birthdate DateTime
  imageUrl  String?
  teamId    Int?
  team      Team?  @relation(fields: [teamId], references: [id])
  stat      Stats? @relation("PlayerToStats")
  matches   Match[]
}

model Stats {
  id          Int    @id @default(autoincrement())
  playerId    Int    @unique
  appearances Int
  goals       Int
  assists     Int
  player      Player @relation("PlayerToStats", fields: [playerId], references: [id]) // Specify fields and references only here
}

model Coach {
  id        Int    @id @default(autoincrement())
  name      String
  job      String
  team     Team?   @relation(fields: [teamId], references: [id])
  teamId   Int     
}

model Team {
  id        Int       @id @default(autoincrement())
  name      String    @unique
  players   Player[]
  coaches   Coach[]
  homeMatches Match[]  @relation("HomeTeam") // Relationship with home games
  awayMatches Match[]  @relation("AwayTeam") // Relationship with away games
}

model Match {
  match_id       Int       @id @default(autoincrement())
  location       String
  date           DateTime
  homeTeamName   String
  awayTeamName   String
  homeScore      Int?
  awayScore      Int?
  players        Player[]
  home           Team?     @relation(name: "HomeTeam", fields: [homeTeamName], references: [name])
  away           Team?     @relation(name: "AwayTeam", fields: [awayTeamName], references: [name])
}



